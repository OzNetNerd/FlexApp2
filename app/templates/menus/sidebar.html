<!-- START TEMPLATE: menus/sidebar.html -->
{# ------------------------------------------------------------------------------
  File: sidebar.html
  Purpose: Left sidebar navigation with collapsible functionality
  Features:
    - Collapsible sidebar
    - Navigation items from navbar_entries
    - Toggle button for expanding/collapsing
------------------------------------------------------------------------------ #}

{% from 'macros/navigation.html' import get_endpoint, is_active, get_url %}

<div id="sidebar" class="sidebar">
  <div class="sidebar-header">
    <a class="sidebar-brand d-flex align-items-center" href="/">
      <div class="brand-icon-container me-2"><i class="fas fa-building"></i></div>
      <span class="brand-text">CRM Dashboard</span>
    </a>
    <button id="sidebarToggleBtn" class="btn btn-link sidebar-toggle d-lg-none">
      <i class="fas fa-times"></i>
    </button>
  </div>

  <div class="sidebar-content">
    <ul class="sidebar-nav">
      {% for item in navbar_entries %}
        {% set endpoint = get_endpoint(item) %}
        {% set is_active_item = is_active(item) %}
        {% set item_url = item.url|default(get_url(item)) %}

        <li class="sidebar-item {% if is_active_item %}active{% endif %}">
          <a href="{{ item_url }}" class="sidebar-link" {% if is_active_item %}aria-current="page"{% endif %}>
            <i class="fas fa-{{ item.icon|default('circle') }} sidebar-icon"></i>
            <span class="sidebar-text">{{ item.name }}</span>
            {% if is_active_item %}<span class="active-indicator"></span>{% endif %}
          </a>
        </li>
      {% endfor %}
    </ul>
  </div>

  <div class="sidebar-footer">
    <button class="btn btn-sidebar-collapse" id="sidebarCollapseBtn">
      <i class="fas fa-chevron-left"></i>
    </button>
  </div>
</div>

<div id="sidebar-overlay"></div>

<!-- Load component scripts -->
<script type="module" src="{{ url_for('static', filename='js/components/sidebar.js') }}"></script>

<!-- Load component styles -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/sidebar.css') }}">
<!-- END TEMPLATE: menus/sidebar.html -->