{#
  ------------------------------------------------------------------------------
  File: render_value.html
  Purpose:
    Defines a reusable macro for rendering field values in read-only mode.
    Applies appropriate formatting depending on the data type of the value.

  Macro:
    - render_value(field)
        Renders a value from a form field, formatted based on its type.

  Parameters:
    - field: Object containing:
        - name: str ‚Äî field identifier (optional, used for logging)
        - value: any ‚Äî the value to render

  Supported value types:
    - None: italic ‚ÄúNone‚Äù text
    - Boolean: Bootstrap badge (green check / red times)
    - Dictionary/Object: Pretty-printed JSON block
    - List/Array: Rendered as a list group
    - String or other: Plain text output

  Notes:
    - Assumes Font Awesome and Bootstrap 5 are available
    - Includes logging to debug rendering decisions
  ------------------------------------------------------------------------------
#}

{% macro render_value(field) %}
  <script type="module">
    import log from "{{ url_for('static', filename='js/logger.js') }}";

    const filename = "render_value.html";
    const fieldName = {{ (field.name or 'unnamed') | tojson | safe }};
    const valueType = {{ (field.value.__class__.__name__ if field.value is not none else 'None') | tojson | safe }};
    const valueStr = {{ field.value | default('null') | tojson | safe }};

    log("debug", filename, "render_value", `ü™™ Rendering value for field '${fieldName}'`);
    log("debug", filename, "render_value", "üì¶ Type", valueType);
    log("debug", filename, "render_value", "üî¢ Value", valueStr);
  </script>

log("debug", filename, "render_value", "Field Object: ", {{ field  }})
log("debug", filename, "render_value", "Field Value: ", {{ field.value }})



  {% if field.value is none %}
    <span class="text-muted fst-italic">None</span>

  {% elif field.value is boolean %}
    <span class="badge bg-{{ 'success' if field.value else 'danger' }}">
      <i class="fas fa-{{ 'check' if field.value else 'times' }}"></i> {{ 'Yes' if field.value else 'No' }}
    </span>

  {% elif field.value is mapping %}
    <pre class="bg-light p-2 rounded">{{ field.value | tojson(indent=2) }}</pre>

  {% elif field.value is iterable and field.value is not string %}
    <ul class="list-group">
      {% for v in field.value %}
        <li class="list-group-item">{{ v }}</li>
      {% endfor %}
    </ul>

  {% else %}
    {{ field.value }}
  {% endif %}
{% endmacro %}