{% import "macros/form_fields/render_sections.html" as sections_macros %}

{% macro render_form(fields_by_section, submit_url, cancel_url, button_text="Submit", read_only=False, edit_url=None) %}
<form action="{{ submit_url }}" method="post" enctype="multipart/form-data">
  {% if not read_only %}
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
  {% endif %}

  {{ sections_macros.render_sections(fields_by_section, read_only) }}

  {% if not read_only %}
    <div class="d-flex justify-content-between mt-4">
      <a href="{{ cancel_url }}" class="btn btn-outline-secondary">
        <i class="fas fa-times me-1"></i> Cancel
      </a>
      <button type="submit" class="btn btn-primary">
        <i class="fas fa-save me-1"></i> {{ button_text }}
      </button>
    </div>
  {% else %}
    <div class="d-flex justify-content-between mt-4">
      <a href="{{ cancel_url }}" class="btn btn-outline-secondary">
        <i class="fas fa-arrow-left me-1"></i> Back
      </a>
      {% if edit_url %}
        <a href="{{ edit_url }}" class="btn btn-primary">
          <i class="fas fa-edit me-1"></i> Edit
        </a>
      {% endif %}
    </div>
  {% endif %}
</form>
{% endmacro %}
