<!-- START TEMPLATE: macros/buttons.html -->

{% macro icon_button(href=None, type=None, class="btn", icon_lib="fas", icon=None,
                text=None, form=None, onclick=None) %}
  {% if href %}
    <a href="{{ href }}" class="{{ class }}" {% if onclick %}onclick="{{ onclick }}"{% endif %}>
      {% if icon %}<i class="{{ icon_lib }} {{ icon_lib }}-{{ icon }} me-1"></i>{% endif %} {{ text }}
    </a>
  {% else %}
    <button type="{{ type or 'button' }}" class="{{ class }}"
      {% if form %}form="{{ form }}"{% endif %}
      {% if onclick %}onclick="{{ onclick }}"{% endif %}>
      {% if icon %}<i class="{{ icon_lib }} {{ icon_lib }}-{{ icon }} me-1"></i>{% endif %} {{ text }}
    </button>
  {% endif %}
{% endmacro %}

{% macro crud_buttons(endpoint_prefix, id=None, entity_name="", model_name="",
                     read_only=true, form_id="main-form", icon_lib="fas") %}
  <div class="d-flex gap-2">
    {% if read_only %}
      {{ button(href=url_for(endpoint_prefix + '.create'),
                class="btn btn-primary fw-bold",
                icon_lib=icon_lib, icon="plus", text="Add") }}

      {% if id %}
        {{ button(href=url_for(endpoint_prefix + '.edit', entity_id=id),
                  class="btn btn-warning text-dark fw-bold",
                  icon_lib=icon_lib, icon="edit", text="Edit") }}

        {{ button(type="button", class="btn btn-danger",
                  icon_lib=icon_lib, icon="trash", text="Delete",
                  onclick="openDeleteModal()") }}
      {% endif %}

      {{ button(href=url_for(endpoint_prefix + '.index'),
                class="btn btn-secondary",
                icon_lib=icon_lib, icon="arrow-left", text="Back") }}
    {% else %}
      {% if id %}
        {{ button(href=url_for(endpoint_prefix + '.view', entity_id=id),
                  class="btn btn-secondary",
                  icon_lib=icon_lib, icon="times", text="Cancel") }}

        {{ button(type="submit", class="btn btn-primary",
                  icon_lib=icon_lib, icon="save", text="Update",
                  form=form_id) }}
      {% else %}
        {{ button(href=url_for(endpoint_prefix + '.index'),
                  class="btn btn-secondary",
                  icon_lib=icon_lib, icon="times", text="Cancel") }}

        {{ button(type="submit", class="btn btn-primary",
                  icon_lib=icon_lib, icon="save", text="Save",
                  form=form_id) }}
      {% endif %}
    {% endif %}
  </div>
{% endmacro %}

{% macro delete_modal(endpoint_prefix, id=None, csrf_input="") %}
<div class="modal fade" id="deleteConfirmationModal" tabindex="-1" role="dialog"
     aria-labelledby="deleteModalLabel" aria-hidden="true" data-bs-scroll="false">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteModalLabel">Confirm Deletion</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"
                aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Are you sure you want to delete this item? This action cannot be undone.
      </div>
      <div class="modal-footer">
        {{ button(type="button", class="btn btn-secondary",
                 text="Cancel", onclick="closeDeleteModal()") }}

        <form action="{{ url_for(endpoint_prefix + '.delete', entity_id=id) }}" method="POST">
          {{ csrf_input }}
          {{ button(type="submit", class="btn btn-danger", text="Confirm") }}
        </form>
      </div>
    </div>
  </div>
</div>
{% endmacro %}

<!-- END TEMPLATE: macros/buttons.html -->
