{% extends "create_view_edit/_create_view_edit.html" %}

{% block content %}
  <div class="tab-content">
    {% for tab in ui %}
      <div class="tab-pane fade {% if loop.first %}show active{% endif %}"
           id="tab-{{ tab.tab_name | lower | replace(' ', '-') }}"
           role="tabpanel"
           aria-labelledby="tab-{{ tab.tab_name | lower | replace(' ', '-') }}-tab">
        {% for section in tab.sections %}
          <h5 class="mt-3">{{ section.section_name }}</h5>
          <div class="row">
            {% for entry in section.entries %}
              {{ macros.render_field(entry) }}
            {% endfor %}
          </div>
        {% endfor %}
      </div>
    {% endfor %}
  </div>

  {# Include footer component #}
  {% include 'base/components/_footer.html' %}

  {# Add the main.js script which will handle autocomplete functionality #}
  <script type="module" src="{{ url_for('static', filename='js/main.js') }}"></script>

  {# If there's an error, show a toast message using toasts.js #}
  {% if error_message %}
    <script type="module">
      import { showToast } from "/static/js/toasts.js";
      document.addEventListener('DOMContentLoaded', () => {
        const message = {{ ("Error creating " ~ model_name ~ ": " ~ error_message) | tojson }};
        showToast(message, "error");
      });
    </script>
  {% endif %}
{% endblock %}