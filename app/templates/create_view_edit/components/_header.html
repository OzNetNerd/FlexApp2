<!-- START TEMPLATE: _header.html -->
{# ------------------------------------------------------------------------------
  File: _header.html | Purpose: Heading + tab nav for entity pages
  Inputs:
    - title      : str  → "Viewing", "Editing", etc.
    - model_name : str  → e.g. "User"
    - item_name  : str  → e.g. "Jessie Smith"
    - read_only  : bool → Controls icon
    - id         : Optional[str] → Presence determines view/edit icon
    - ui         : Optional[List] → If present, includes _pills_nav.html
  Notes:
    - Should be inside a Bootstrap card header
    - Uses icon to indicate mode and logs render context
------------------------------------------------------------------------------ #}

<!-- START HEADER MARKER - If you see this in the DOM, template is being included -->
{% import "create_view_edit/macros/render_field.html" as macros %}

<h3 class="h4 mb-0 text-primary me-3">
  {% if read_only %}
    <i class="fas fa-eye me-2"></i>
  {% elif id is defined and id %}
    <i class="fas fa-edit me-2"></i>
  {% else %}
    <i class="fas fa-plus-circle me-2"></i>
  {% endif %}
  {{ title|default('') }} {{ model_name|default('') }}: <span class="text-info">{{ item_name|default('') }}</span>
</h3>

{% if ui is defined and ui %}
  {% include 'create_view_edit/components/_pills_nav.html' %}
{% endif %}

<!-- 🔍 Header Render Context Logging -->
<script>
  console.log("DEBUG: _header.html script started"); // Basic console log to check if script runs
</script>

<script type="module">
  try {
    import log from "{{ url_for('static', filename='js/logger.js') }}";

    console.log("_header.html module script running"); // Check if module script executes

    const headerContext = {
      title: "{{ title|default('undefined') }}",
      model: "{{ model_name|default('undefined') }}",
      itemName: "{{ item_name|default('undefined') }}",
      readOnly: {{ read_only|default('false')|tojson }},
      hasId: {{ (id is defined and id is not none)|default('false')|tojson }},
      hasUi: {{ (ui is defined and ui is not none)|default('false')|tojson }}
    };

    console.log("Header context data:", headerContext); // Regular console.log as backup
    log("info", "_header.html", "render", "🧠 Header context", headerContext);
  } catch (error) {
    console.error("Error in _header.html script:", error);
  }
</script>

<!-- END TEMPLATE: _header.html -->