{% import "macros/render_form_fields.html" as form %}
{% import "macros/form_fields/_render_sections.html" as sections %}

<!DOCTYPE html>
<html lang="en">
  {% include 'base/common/_head.html' %}
  <body>
    {% include "base/common/_toasts.html" %}

    {%- set show_navbar = show_navbar %}  {# Precompute the variable before including #}

    {% include 'base/common/_navbar.html' %}  {# No need for 'with' anymore #}

    <main class="py-4">
      <div class="container">
        <div class="card border-0 shadow-sm">
          <div class="card-header bg-white py-3">
            <div class="row align-items-center">
              <div class="col">
                <div class="d-flex align-items-center">
                  {% include 'create_view_edit/components/_header.html' %}
                </div>
              </div>
              <div class="col-auto">
                {% include 'create_view_edit/components/_header_buttons.html' %}
              </div>
            </div>
          </div>

          <div class="card-body">
            <form method="POST">
              {% if ui %}
                {% include 'create_view_edit/components/_pills_nav_content.html' %}
              {% else %}
                {% include 'create_view_edit/components/_section_layout.html' %}
              {% endif %}

              {% if not read_only %}
                {% include 'create_view_edit/components/_footer_buttons.html' %}
              {% endif %}
            </form>
          </div>
        </div>
      </div>
    </main>

    {% include "base/common/_scripts.html" %}
  </body>
</html>
