<!-- START TEMPLATE: view.html -->
{# ------------------------------------------------------------------------------
  File: view.html | Purpose: Renders a view-only detail page for entities
  Structure:
    - Extends: base/entity_page.html
    - Imports: macros/form_fields.html
    - Blocks: content
  Inputs (from ResourceContext):
    - title      : Page title
    - read_only  : Boolean flag
    - ui         : List of Tab objects (with sections and TabEntry fields)
    - request    : Flask request context
  Output:
    - Tabbed Bootstrap interface with read-only field rendering
    - Section headers grouping fields
    - Each field rendered via a macro for consistency
------------------------------------------------------------------------------ #}

{% extends "base/entity_page.html" %}

{% import "macros/form_fields.html" as macros %}

{% block content -%}
{{ super() }}

<div class="tab-content">
  {% for tab in ui %}
    <div class="tab-pane fade {% if loop.first %}show active{% endif %}"
         id="tab-{{ tab.tab_name | lower | replace(' ', '-') }}"
         role="tabpanel"
         aria-labelledby="tab-{{ tab.tab_name | lower | replace(' ', '-') }}-tab">

      {% for section in tab.sections %}
        <h5 class="mt-3">{{ section.section_name }}</h5>

        {% for entry in section.entries %}
          {{ macros.render_field(entry, read_only=True) }}
        {% endfor %}
      {% endfor %}

    </div>
  {% endfor %}
</div>
{%- endblock %}
<!-- END TEMPLATE: view.html -->
