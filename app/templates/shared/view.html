{#
  ------------------------------------------------------------------------------
  File: view.html
  Purpose:
    Extends the base entity page layout and includes a modal for delete
    confirmation. This page is typically used to display a read-only view
    of an entity's details with a delete option.

  Template Structure:
    - Extends:
        • pages/base/entity_page.html
    - Imports:
        • macros/form_fields.html (for possible field rendering needs)
    - Blocks:
        • content: Injects custom content into the base page
        • Modal: Bootstrap modal for confirming item deletion

  Inputs (expected in context):
    - item      : The object being viewed (must have an `id` for delete URL)
    - request   : Flask request context (used to resolve route for deletion)

  Output:
    - A Bootstrap modal (`#deleteModal`) for confirming item deletion.
      When confirmed, redirects to the `*.delete` endpoint with the item ID.

  Example Use:
    Typically rendered for read-only detail views, where users can
    optionally delete the entity via a confirmation dialog.

  Notes:
    - Modal visibility is triggered externally (e.g., via a button with
      `data-bs-toggle="modal"` and `data-bs-target="#deleteModal"`).
    - Make sure `item` is defined in the context or the delete URL will break.
    - Use in conjunction with `_buttons.html` for edit/delete controls.

  ------------------------------------------------------------------------------
#}

{% extends "pages/base/entity_page.html" %}
{% import "macros/form_fields.html" as macros %}

{% block content %}
{{ super() }}
{# Modal for Delete Confirmation #}
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteModalLabel">Confirm Delete</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Are you sure you want to delete this item?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <a href="{{ url_for(request.endpoint.rsplit('.', 1)[0] + '.delete', item_id=item.id) }}" class="btn btn-danger">
          Delete
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
