{% extends "layouts/base.html" %}
{% import "macros/widgets.html" as components %}

{% block title %}CRM Dashboard - Home{% endblock %}

{% block content %}
<!-- Welcome Section -->
<div class="row mb-4">
  <div class="col-12">
    <div class="bg-white p-4 rounded shadow-sm">
      <h1 class="h3 mb-2">Welcome to your CRM</h1>
      <p class="text-muted">Manage your customer relationships efficiently</p>
    </div>
  </div>
</div>

<!-- Navigation Cards -->
<div class="row mb-4">
  {{ components.navigation_card(
    "bi bi-building", "text-primary", 
    "Companies", "Manage all your client companies", 
    "/companies"
  ) }}
  
  {{ components.navigation_card(
    "bi bi-people", "text-success", 
    "Customers", "Manage individual customer contacts", 
    "/customers"
  ) }}
  
  {{ components.navigation_card(
    "bi bi-graph-up-arrow", "text-danger", 
    "Opportunities", "Track sales opportunities and deals", 
    "/opportunities"
  ) }}
</div>

<!-- Summary Section -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card border-0 shadow-sm">
      <div class="card-header bg-white">
        <h2 class="h5 mb-0">Summary</h2>
      </div>
      <div class="card-body">
        <div class="row">
          {{ components.stat_card("4", "Companies", "text-primary") }}
          {{ components.stat_card("9", "Contacts", "text-success") }}
          {{ components.stat_card("7", "Deals", "text-danger") }}
          {{ components.stat_card("$925K", "Pipeline", "text-info") }}
        </div>

        <div class="text-center mt-3 py-3 bg-light rounded position-relative overflow-hidden">
          <div class="highlights-container">
            <div class="highlight-item">
              <p class="h6 mb-0 fw-normal">
                <span class="text-primary fw-bold">4</span> companies ·
                <span class="text-success fw-bold">9</span> contacts ·
                <span class="text-danger fw-bold">7</span> deals =
                <span class="text-info fw-bold">$925K</span> pipeline
              </p>
            </div>

            <div class="highlight-item">
              <p class="h6 mb-0 fw-normal">
                <i class="fas fa-arrow-up text-success me-1"></i>
                <span class="fw-bold">$125K</span> added to pipeline this week
              </p>
            </div>

            <div class="highlight-item">
              <p class="h6 mb-0 fw-normal">
                <i class="fas fa-chart-line text-primary me-1"></i>
                <span class="fw-bold">3</span> deals progressed to next stage
              </p>
            </div>

            <div class="highlight-item">
              <p class="h6 mb-0 fw-normal">
                <i class="fas fa-percentage text-warning me-1"></i>
                CRIP score increased by <span class="fw-bold">12%</span> this month
              </p>
            </div>

            <div class="highlight-item">
              <p class="h6 mb-0 fw-normal">
                <i class="fas fa-trophy text-danger me-1"></i>
                <span class="fw-bold">2</span> net new logos added this quarter
              </p>
            </div>
          </div>

          <div class="highlight-controls position-absolute" style="right: 10px; top: 50%; transform: translateY(-50%);">
            <button class="btn btn-sm btn-outline-secondary btn-highlight-prev">
              <i class="fas fa-chevron-left"></i>
            </button>
            <button class="btn btn-sm btn-outline-secondary btn-highlight-next ms-1">
              <i class="fas fa-chevron-right"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Recent Activity Section -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card border-0 shadow-sm">
      <div class="card-header bg-white d-flex justify-content-between align-items-center">
        <h2 class="h5 mb-0">Recent Activity</h2>
        <button class="btn btn-sm btn-outline-primary">View All</button>
      </div>
      <div class="card-body">
        <ul class="list-group list-group-flush">
          {{ components.activity_item(
            "bi bi-graph-up", "bg-warning",
            "Deal progressed: <strong>GlobalTech - Moved to Negotiation</strong>",
            "1 hour ago"
          ) }}
          
          {{ components.activity_item(
            "bi bi-person-plus", "bg-primary",
            "New contact added: <strong>Sarah Johnson</strong>",
            "3 hours ago"
          ) }}
          
          {{ components.activity_item(
            "bi bi-building-add", "bg-danger",
            "New company added: <strong>Quantum Solutions</strong>",
            "Yesterday"
          ) }}
          
          {{ components.activity_item(
            "bi bi-currency-dollar", "bg-success",
            "Deal closed: <strong>Fusion Industries - $185,000</strong>",
            "2 days ago"
          ) }}
          
          {{ components.activity_item(
            "bi bi-calendar-event", "bg-info",
            "Meeting scheduled with <strong>NexGen Systems</strong>",
            "March 27, 2025"
          ) }}
        </ul>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts_extra %}
{% endblock %}

{% block head_extra %}
<style>
/* Activity Icons */
.activity-icon {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  font-size: 1.2rem;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  transition: transform 0.2s, box-shadow 0.2s;
}

.activity-icon:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 8px rgba(0,0,0,0.15);
}

/* Navigation cards hover effect */
.nav-card {
  transition: transform 0.2s, box-shadow 0.2s;
}

.nav-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 20px rgba(0,0,0,0.1) !important;
}

/* Highlights container */
.highlights-container {
  display: flex;
  overflow-x: hidden;
  scroll-behavior: smooth;
}

.highlight-item {
  min-width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
}
</style>
{% endblock %}