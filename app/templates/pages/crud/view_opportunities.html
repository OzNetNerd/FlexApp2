{% extends "base/create_view_edit/_create_view_edit.html" %}
{% set tabs = [
    {'tab_name': 'Basic Info'},
    {'tab_name': 'Company Details'},
    {'tab_name': 'Pipeline Info'},
    {'tab_name': 'Financial Details'},
    {'tab_name': 'CRISP'},
    {'tab_name': 'System Info'}
] %}
{% import 'base/macros/render_form_fields.html' as field_macros with context %}

{% block view_template_content %}
<form method="post">
  <!-- Container for all tab panes -->
  <div class="tab-content" id="formTabsContent">

    <!-- Tab Pane: Basic Info -->
    <div class="tab-pane fade show active" id="tab-basic-info">
      <div class="card shadow-sm border-0 mb-4">
        <div class="card-header bg-white">
          <h5 class="h6 text-primary fw-semibold mb-0">Basic Information</h5>
        </div>
        <div class="card-body">
          <div class="row g-3">
            {{ field_macros.render_field({
                "entry_name": "id",
                "label": "ID",
                "type": "readonly",
                "value": entity.id,
                "required": false,
                "options": []
             }, read_only=true) }}
            {{ field_macros.render_field({
                "entry_name": "name",
                "label": "Name",
                "type": "text",
                "value": entity.name,
                "required": true,
                "options": []
             }, read_only=true) }}
            {{ field_macros.render_field({
                "entry_name": "description",
                "label": "Description",
                "type": "textarea",
                "value": entity.description,
                "required": false,
                "options": []
             }, read_only=true) }}
          </div>
        </div>
      </div>
    </div>

    <!-- Tab Pane: Company Details -->
    <div class="tab-pane fade" id="tab-company-details">
      <div class="card shadow-sm border-0 mb-4">
        <div class="card-header bg-white">
          <h5 class="h6 text-primary fw-semibold mb-0">Company Information</h5>
        </div>
        <div class="card-body">
          <div class="row g-3">
            {{ field_macros.render_field({
                "entry_name": "company.name",
                "label": "Company Name",
                "type": "text",
                "value": entity.company.name,
                "required": false,
                "options": []
             }, read_only=true) }}
            {{ field_macros.render_field({
                "entry_name": "company.id",
                "label": "Company ID",
                "type": "text",
                "value": entity.company.id,
                "required": false,
                "options": []
             }, read_only=true) }}
            {{ field_macros.render_field({
                "entry_name": "contact_name",
                "label": "Primary Contact",
                "type": "text",
                "value": entity.contact_name,
                "required": false,
                "options": []
             }, read_only=true) }}
          </div>
        </div>
      </div>
    </div>

    <!-- Tab Pane: Pipeline Info -->
    <div class="tab-pane fade" id="tab-pipeline-info">
      <div class="card shadow-sm border-0 mb-4">
        <div class="card-header bg-white">
          <h5 class="h6 text-primary fw-semibold mb-0">Pipeline Information</h5>
        </div>
        <div class="card-body">
          <div class="row g-3">
            {{ field_macros.render_field({
                "entry_name": "stage",
                "label": "Stage",
                "type": "text",
                "value": entity.stage,
                "required": true,
                "options": []
             }, read_only=true) }}
            {{ field_macros.render_field({
                "entry_name": "status",
                "label": "Status",
                "type": "text",
                "value": entity.status,
                "required": false,
                "options": []
             }, read_only=true) }}
            {{ field_macros.render_field({
                "entry_name": "probability",
                "label": "Probability",
                "type": "number",
                "value": entity.probability,
                "required": false,
                "options": []
             }, read_only=true) }}
            {{ field_macros.render_field({
                "entry_name": "next_steps",
                "label": "Next Steps",
                "type": "textarea",
                "value": entity.next_steps,
                "required": false,
                "options": []
             }, read_only=true) }}
          </div>
        </div>
      </div>
    </div>

    <!-- Tab Pane: Financial Details -->
    <div class="tab-pane fade" id="tab-financial-details">
      <div class="card shadow-sm border-0 mb-4">
        <div class="card-header bg-white">
          <h5 class="h6 text-primary fw-semibold mb-0">Financial Information</h5>
        </div>
        <div class="card-body">
          <div class="row g-3">
            {{ field_macros.render_field({
                "entry_name": "value",
                "label": "Value",
                "type": "number",
                "value": entity.value,
                "required": true,
                "options": []
             }, read_only=true) }}
            {{ field_macros.render_field({
                "entry_name": "currency",
                "label": "Currency",
                "type": "text",
                "value": entity.currency,
                "required": false,
                "options": []
             }, read_only=true) }}
            {{ field_macros.render_field({
                "entry_name": "expected_close_date",
                "label": "Expected Close Date",
                "type": "date",
                "value": entity.expected_close_date,
                "required": false,
                "options": []
             }, read_only=true) }}
            {{ field_macros.render_field({
                "entry_name": "payment_terms",
                "label": "Payment Terms",
                "type": "text",
                "value": entity.payment_terms,
                "required": false,
                "options": []
             }, read_only=true) }}
          </div>
        </div>
      </div>
    </div>

    <!-- Tab Pane: CRISP -->
    <div class="tab-pane fade" id="tab-crisp">
      {% include 'components/_crisp.html' %}
    </div>

    <!-- Tab Pane: System Info -->
    <div class="tab-pane fade" id="tab-system-info">
      <div class="card shadow-sm border-0 mb-4">
        <div class="card-header bg-white">
          <h5 class="h6 text-primary fw-semibold mb-0">System Information</h5>
        </div>
        <div class="card-body">
          <div class="row g-3">
            {{ field_macros.render_field({
                "entry_name": "created_at",
                "label": "Created At",
                "type": "date",
                "value": entity.created_at,
                "required": false,
                "options": []
             }, read_only=true) }}
            {{ field_macros.render_field({
                "entry_name": "updated_at",
                "label": "Updated At",
                "type": "date",
                "value": entity.updated_at,
                "required": false,
                "options": []
             }, read_only=true) }}
            {{ field_macros.render_field({
                "entry_name": "owner",
                "label": "Owner",
                "type": "text",
                "value": entity.owner,
                "required": false,
                "options": []
             }, read_only=true) }}
          </div>
        </div>
      </div>
    </div>

  </div>
</form>
{% endblock view_template_content %}