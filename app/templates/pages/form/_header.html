{#
  ------------------------------------------------------------------------------
  File: _header.html
  Purpose:
    Renders the dynamic heading section for entity pages, showing the mode
    (view/edit/create), entity name, and instance name. Also includes tab
    navigation when `tabs` are available.

  Inputs (expected in context):
    - title      : str
        Describes the action (e.g., "Viewing", "Editing", "Creating")
    - model_name : str
        Entity type (e.g., "User", "Company", "Task")
    - item_name  : str
        Display name of the current instance (e.g., "Jessie Smith")
    - read_only  : bool
        If True, sets icon to "eye"; if False, uses edit/create icon logic
    - item       : Optional[Model]
        Indicates if an entity instance is being acted on
    - tabs       : Optional[List]
        If present, includes `_pills_nav.html` for tab navigation

  Features:
    - Contextual icon based on view mode
    - Dynamic heading with title and entity name
    - Clean layout with margin adjustments
    - Conditionally renders tab navigation pills
    - Logs header rendering context using logger.js

  Notes:
    - Should be used within a Bootstrap-styled header layout
    - Assumes tab definitions are formatted for `_pills_nav.html`
  ------------------------------------------------------------------------------
#}

{% import "macros/form_fields/render_field.html" as macros %}

<h3 class="h4 mb-0 text-primary me-3">
  {% if read_only %}
    <i class="fas fa-eye me-2"></i>
  {% elif item %}
    <i class="fas fa-edit me-2"></i>
  {% else %}
    <i class="fas fa-plus-circle me-2"></i>
  {% endif %}
  {{ title }} {{ model_name }}: <span class="text-info">{{ item_name }}</span>
</h3>

{% if tabs %}
  {% include 'pages/form/_pills_nav.html' %}
{% endif %}

<!-- ðŸ” Header Render Context Logging -->
<script type="module">
  import log from "{{ url_for('static', filename='js/logger.js') }}";

  const headerContext = {
    title: {{ title | tojson | safe }},
    model: {{ model_name | tojson | safe }},
    itemName: {{ item_name | tojson | safe }},
    readOnly: {{ read_only | tojson | safe }},
    hasItem: {{ 'true' if item else 'false' }},
    hasTabs: {{ 'true' if tabs else 'false' }}
  };

  log("info", "_header.html", "render", "ðŸ§  Header context", headerContext);
</script>
