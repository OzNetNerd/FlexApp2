{% import "macros/form_fields/render_field.html" as macros %}

{% if tabs|length > 1 %}
  <div class="btn-group mb-3" role="tablist">
    {% for tab in tabs %}
      <button class="btn btn-sm btn-outline-primary {% if loop.first %}active{% endif %}"
              id="tab-{{ tab.tab_name | lower | replace(' ', '-') }}-tab"
              data-bs-toggle="pill"
              data-bs-target="#tab-{{ tab.tab_name | lower | replace(' ', '-') }}"
              type="button"
              role="tab"
              aria-controls="tab-{{ tab.tab_name | lower | replace(' ', '-') }}"
              aria-selected="{{ 'true' if loop.first else 'false' }}">
        {{ tab.tab_name }}
      </button>
    {% endfor %}
  </div>
{% endif %}

<!-- Logging for Pills Nav -->
<script type="module">
  import log from "{{ url_for('static', filename='js/logger.js') }}";

  const tabs = {{ tabs | map(attribute='tab_name') | list | tojson | safe }};
  const sectionCounts = {{ tabs | map(attribute='sections') | map('length') | list | tojson | safe }};

  log("info", "_pills_nav.html", "render", "ðŸ“‘ Tab navigation rendered", {
    totalTabs: tabs.length,
    tabs,
    sectionCounts
  });
</script>
