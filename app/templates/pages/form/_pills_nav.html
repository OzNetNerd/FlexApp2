<!-- START TEMPLATE: _pills_nav.html -->
{# ------------------------------------------------------------------------------
  File: _pills_nav.html | Purpose: Pill-style tab navigation for forms
  Inputs:
    - ui: List[Tab]
      Each tab:
        ‚Ä¢ tab_name: str (label/ID)
        ‚Ä¢ sections: List (used for logging)
  Notes:
    - Bootstrap 5 tab/pill toggle via buttons
    - Must match tab-pane IDs rendered below
------------------------------------------------------------------------------ #}

{% import "macros/form_fields/render_field.html" as macros %}

{% if ui | length > 1 %}
  <div class="btn-group" role="tablist">
    {% for tab in ui %}
      <button class="btn btn-sm btn-outline-primary {% if loop.first %}active{% endif %}"
              id="tab-{{ tab.tab_name | lower | replace(' ', '-') }}-tab"
              data-bs-toggle="pill"
              data-bs-target="#tab-{{ tab.tab_name | lower | replace(' ', '-') }}"
              type="button"
              role="tab"
              aria-controls="tab-{{ tab.tab_name | lower | replace(' ', '-') }}"
              aria-selected="{{ 'true' if loop.first else 'false' }}">
        {{ tab.tab_name }}
      </button>
    {% endfor %}
  </div>
{% endif %}

<!-- üßæ Logging for Pills Navigation Context -->
<script type="module">
  import log from "{{ url_for('static', filename='js/logger.js') }}";

  try {
    const tabNames = {{ ui | map(attribute='tab_name') | list | tojson | safe }};
    const sectionCounts = {{ ui | map(attribute='sections') | map('length') | list | tojson | safe }};

    log("info", "_pills_nav.html", "render", {
      message: "üìë Tab navigation rendered",
      totalTabs: tabNames.length,
      tabs: tabNames,
      sectionCounts
    });
  } catch (e) {
    console.warn("‚ö†Ô∏è Could not serialize tab info for logging:", e);
  }
</script>
<!-- END TEMPLATE: _pills_nav.html -->
