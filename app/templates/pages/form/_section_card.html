{#
  ------------------------------------------------------------------------------
  File: _section_card.html
  Purpose:
    Renders a Bootstrap-styled card component for a group of fields belonging
    to the same section within a form. Each card includes a section heading and
    a responsive grid layout for its fields.
  Inputs (expected in context):
    - _section       : String. The name of the section (e.g., "Details", "Settings").
    - _section_fields : List. The fields to display in this section.
    - read_only      : Boolean. Indicates if the form is in read-only mode.
    - macros         : Macro namespace containing the field renderer.
  ------------------------------------------------------------------------------
#}
<div class="card shadow-sm border-0 mb-4">
  <div class="card-header bg-white">
    <h5 class="h6 text-primary fw-semibold mb-0">
      {{ _section or 'General' }}
    </h5>
  </div>
  <div class="card-body">
    <div class="row g-3">
      {% for field_item in _section_fields %}
        {% if field_item.name == 'crisp' and read_only %}
          {% include 'shared/components/_crisp.html' with context %}
        {% else %}
          {{ field.render_field(field_item, read_only) }}
        {% endif %}
      {% endfor %}
    </div>
  </div>
</div>

<!-- Logging for Section Card -->
<script type="module">
  import log from "{{ url_for('static', filename='js/logger.js') }}";

  const sectionName = {{ (_section or 'General') | tojson | safe }};
  const fieldCount = {{ _section_fields | length }};
  const isReadOnly = {{ read_only | tojson | safe }};

  log("info", "_section_card.html", "render", "ðŸ“¦ Section rendered", {
    section: sectionName,
    fieldCount: fieldCount,
    readOnly: isReadOnly
  });
</script>
