{#
  ------------------------------------------------------------------------------
  File: _footer.html
  Purpose:
    Renders form footer with Cancel and Submit buttons for entity create/edit
    views. Adjusts behavior, style, and labels based on context.

  Inputs (expected in context):
    - item: Optional[Model]
        If present, form is in edit mode. If not, it's in create mode.
    - button_text: Optional[str]
        Optional override for the submit button label (e.g., "Update", "Save").

  Features:
    - Bootstrap 5 layout with right-aligned buttons
    - Cancel button dynamically routes to view or index based on mode
    - Submit button icon, style, and label adapt based on form mode
    - Logs footer context for diagnostics

  Button Logic:
    - Cancel:
        - If editing: go to `.view`
        - If creating: go to `.index`
    - Submit:
        - Button style: success (edit) or primary (create)
        - Icon: save (edit) or plus-circle (create)
        - Label: "Save Changes" or "Create" (or overridden by `button_text`)

  Notes:
    - Assumes parent form uses `method="POST"`
    - Should be placed inside the `<form>` element
  ------------------------------------------------------------------------------
#}

<div class="d-flex justify-content-end mt-4">
  <a href="{{ url_for(request.endpoint.rsplit('.', 1)[0] + ('.view' if item else '.index'), item_id=item.id if item else None) }}"
     class="btn btn-secondary bg-opacity-75 fw-semibold text-white me-2">
    <i class="fas fa-times me-1"></i> Cancel
  </a>
  <button type="submit" class="btn btn-{{ 'success' if item else 'primary' }}">
    <i class="fas fa-{{ 'save' if item else 'plus-circle' }} me-1"></i>
    {{ button_text or ('Save Changes' if item else 'Create') }}
  </button>
</div>

<!-- ðŸ§¾ Footer Context Logging -->
<script type="module">
  import log from "{{ url_for('static', filename='js/logger.js') }}";

  const context = {
    mode: {{ "'edit'" if item else "'create'" }},
    cancelTarget: {{ ("'view'" if item else "'index'") }},
    submit: {
      style: {{ "'success'" if item else "'primary'" }},
      icon: {{ "'save'" if item else "'plus-circle'" }},
      label: {{ (button_text or ('Save Changes' if item else 'Create')) | tojson | safe }}
    }
  };

  log("info", "_footer.html", "render", "ðŸ¦¶ Footer render context", context);
</script>
