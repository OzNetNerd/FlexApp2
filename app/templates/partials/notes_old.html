<!-- Hidden configuration element for notes -->
<div id="notesData"
     data-notable-type="{{ entity.__class__.__name__ }}"
     data-notable-id="{{ entity.id }}"
     data-user-id="{{ current_user.id }}"
     data-username="{{ current_user.username }}"
     data-script-name="notes_section">
</div>

<!-- Notes section with filter, custom range and search controls -->
<div class="col-12">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <!-- Left side: Filter dropdown -->
    <div class="d-flex align-items-center" style="width: 65%;">
      <select id="noteFilterSelect" class="form-select form-select-sm me-3" style="max-width: 150px;">
        <option value="7">Last 7 days</option>
        <option value="30">Last 30 days</option>
        <option value="0" selected>All notes</option>
        <option value="custom">Custom range...</option>
      </select>

      <!-- Date range selectors (initially hidden) -->
      <div id="dateRangeSelectors" class="d-none d-flex align-items-center flex-grow-1">
        <input type="date" id="dateFrom" class="form-control form-control-sm me-2" aria-label="From date">
        <span class="mx-1">to</span>
        <input type="date" id="dateTo" class="form-control form-control-sm ms-2" aria-label="To date">
      </div>
    </div>

    <!-- Right side: Search input with border -->
    <div class="input-group" style="max-width: 35%;">
      <span class="input-group-text">
        <i class="fas fa-search"></i>
      </span>
      <input type="search"
             id="noteSearchInput"
             class="form-control"
             placeholder="Search notes...">
    </div>
  </div>
</div>

<!-- Loading indicator -->
<div class="col-12">
  <div id="notesLoading" class="text-center py-4">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-2">Loading notes</p>
  </div>
</div>

<!-- Notes list container -->
<div class="col-12">
  <div id="notesList" class="notes-list mb-4">
    <!-- Notes will be loaded here via JavaScript -->
  </div>
</div>

<!-- New note form -->
<div class="col-12">
  <form id="newNoteForm" class="mt-4">
    <div class="mb-3">
      <label for="content" class="form-label">Add a note</label>
      <textarea id="content" name="content" class="form-control" rows="3" placeholder="Enter your note here..."></textarea>
    </div>
    <button type="submit" class="btn btn-primary">
      <i class="fas fa-plus me-1"></i> Add Note
    </button>
  </form>
</div>

<script type="module" src="{{ url_for('static', filename='js/pages/notesSection.js') }}"></script>