{#
  ------------------------------------------------------------------------------
  File: page.html
  Purpose:
    Base HTML layout for all standard pages in the application. Provides the
    common HTML structure, global assets, and consistent layout components.

  Template Structure:
    - Standard HTML5 document structure with proper DOCTYPE declaration
    - Modular component inclusion through partials
    - Flexible block regions for content customization
    - Centralized JavaScript resource management

  Inputs (expected in context):
    - show_navbar : Boolean (optional). Controls navbar visibility.
                   If not provided or True, navbar will be shown.
                   If False, navbar will be hidden.
    - Any variables needed by included partials (_head.html, _navbar.html, etc.)

  Blocks:
    - content : Primary content area within a responsive container
                Child templates should override this block
    - footer  : Optional footer region at the bottom of the page
                Empty by default, can be overridden by child templates
    - extra_scripts : Optional block for page-specific script inclusion
                      (not currently defined, consider adding if needed)

  Included Partials:
    - base/common/_head.html    : Meta tags, title, CSS resources
    - base/common/_toasts.html  : Notification/alert system
    - base/common/_navbar.html  : Navigation header (conditional)

  JavaScript Resources:
    - Bootstrap 5.3.2 (from CDN)      : Core UI framework
    - AG Grid (from CDN)              : Data grid component
    - table.js (local)                : Custom table initialization
    - autoComplete.js (local)         : Search/autocomplete functionality

  Example usage:
    {% extends "base/page.html" %}
    {% block content %}
      <h1>Page Title</h1>
      <p>Content goes here...</p>
    {% endblock %}

  ------------------------------------------------------------------------------
#}
<!DOCTYPE html>
<html lang="en">
  {% include 'base/common/_head.html' %}
  <body>
    {% include "base/common/_toasts.html" %}
    {% if show_navbar is not defined or show_navbar %}
      {% include 'base/common/_navbar.html' %}
    {% endif %}

    <main class="py-4">
      <div class="container">
        {% block content %}{% endblock %}
      </div>
    </main>

    {% block footer %}{% endblock %}

    <!-- Core JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Data Grid -->
    <script src="https://cdn.jsdelivr.net/npm/ag-grid-community/dist/ag-grid-community.min.js"></script>

    <!-- Custom Application Scripts -->
    <script type="module" src="{{ url_for('static', filename='js/table.js') }}"></script>
    <script type="module" src="{{ url_for('static', filename='js/autoComplete.js') }}"></script>

    <!-- Logging Context Info -->
    <script type="module">
      import log from "{{ url_for('static', filename='js/logger.js') }}";

      const tableId = {{ table_id | tojson | safe }};
      const dataUrl = {{ data_url | tojson | safe }};

      log("info", "page.html", "DOMContentLoaded", "üîç Table ID loaded", tableId);
      log("info", "page.html", "DOMContentLoaded", "üì° Data URL loaded", dataUrl);
    </script>

    {% block extra_scripts %}{% endblock %}
  </body>
</html>
